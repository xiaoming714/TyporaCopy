# 变量

## 变量基础

变量：局部、全局，系统、用户

1. env查看当前系统的环境变量
2. set查看当前系统全部变量
3. 使用readonly创建只读变量
4. 使用unset来销毁变量
5. export命令可以使变量变为全局变量，更改全局变量只在内层有效

- shell的变量赋值不能有空格
- 在命令行创建的变量默认是局部变量
- 变量的值如果有空格，必须用双、单引号括起来
- 默认变量类型都是字符串，无法直接进行数值运算

## 特殊变量

### $n

n为数字，$0表示当前脚本的名称，1-9表示1-9个参数，十个以上的参数n必须使用大括号括起来

### $#

获取参数的个数，通常用于循环、判断参数个数是否正确以加强脚本健壮性

### $*、$@

获取全部的参数

$*将所有的参数视作一个整体

$@将每个参数区分开

### $?

获取最后一次执行命令的返回状态，通常为0则表示正常

# 运算符

expr命令：将每个运算符和操作数作为参数传入，之间需要空格隔开，*需要使用\转移，因为是通配符

上述方法较为复杂，可以使用$(())或$[]来进行运算

$()是命令替换，将小括号内的表达式的运算结果返回，使用``包裹也可以达到同样的效果（反引号）

# 条件判断

## test

test condition 可以对condition进行判断，需要通过$?来对最近执行的语句的返回值进行判断

0为真、1为假

## []

[ condition ]也可以对condition进行判断，condition前后一定要有空格

条件非空即为true

## 常见判断条件

多条件判断使用&&和||，支持短路

整数比较

- = 等于
- != 不等于
- -eq 等于
- -lt 小于
- -gt 大于
- -ne 不等于
- -le 小于等于
- ge 大于等于

文件权限判断

- -r 有读的权限
- -w 有写的权限
- -x 有执行的权限

文件类型判断

- -e 文件存在
- -f 是否是常规文件
- -d 是否是目录

其他

- if [ -n str ] 串非空
- if [ -z str ] 串空
- =~ 左侧变量是否与右侧正则匹配

## if判断

## 单分支

if后需要有空格

```bash
if [ condition ]; then
程序
if

if [ condition ]
then
程序
if
```

如果想将多个条件放到一个括号中，-a 表示and、-o表示or

## 多分支

```bash
if [ condition ]
then
程序
elif [ condition ]
then
程序
else
程序
fi
```

