# HTTP的风险

1. 窃听风险
2. 篡改风险
3. 冒充风险

# HTTPS如何解决

1. 混合加密
2. 摘要算法
3. 数字证书

# 混合加密

- 对称加密

  - 概念：双方各出一个随机数，根据随机数生成密钥，双方密钥相同，加密解密密钥相同
  - 优点：快速，代价小，通常对文件进行二进制反转操作
  - 缺点：在交换密钥时，会被中间人窃取

- 非对称加密

  - 概念：服务器保存私钥，公钥可以随意分发，公钥加密私钥解密，私钥加密公钥解密
  - 优点：相对安全
  - 缺点：加密困难，通常对数据进行幂操作

- 混合加密

  服务器持有私钥，将公钥发给客户端，客户端生成对称密钥，将对称密钥用公钥加密发给服务器，服务器用私钥解密，随后的消息，使用对称加密密钥进行加密

# 摘要算法

对内容进行哈希运算，得到哈希值N，服务器发送消息时，将内容和哈希值N一同发给客户端，客户端在收到消息的时候，使用同样的哈希算法对内容进行哈希运算，得到哈希值M，将N和M进行比对，如果相同则证明没有被篡改

# 数字证书

在计算机世界中，有一个机构叫做CA机构，服务器事先向CA机构，申请证书，CA机构返回证书，将内容、摘要、CA证书一同发送给客户端，客户端收到后，向CA机构验证证书是否合法

# https四次握手

在TCP三次握手之后，https进行四次握手

客户端生成报文（TLS版本号、随机数、加密套件）

服务器生成报文（TLS版本号、随机数、加密套件、公钥）

客户端验证服务器身份、根据双方交换的随机数生成对称加密密钥，用服务器发送的公钥对对称加密密钥进行加密发送给服务器

服务器确认